\documentclass[en, normal, 11pt, black]{elegantnote}

\usepackage{tcolorbox}
\tcbuselibrary{breakable}
\usepackage{amsfonts}
\usepackage{newtxtext}
\usepackage{ulem}
\usepackage{amssymb}

\newenvironment{exercise}[1]{\begin{tcolorbox}[colback=black!15, colframe=black!80, breakable, title=#1]}{\end{tcolorbox}}

\renewenvironment{proof}{\begin{tcolorbox}[colback=white, colframe=black!50, breakable, title=Proof. ]\setlength{\parskip}{0.8em}}{\\\rightline{$\square$}\end{tcolorbox}}

\newenvironment{solution}{\begin{tcolorbox}[colback=white, colframe=black!50, breakable, title=Solution. ]\setlength{\parskip}{0.8em}}{\end{tcolorbox}}

\newcommand{\pder}{\partial\,}

\newcommand{\der}{\,\mathbf{d}}

\title{\textsc{Probability: Problem Set 1}}
\author{\textsc{Zehao Wang}}
\date{\today}

\begin{document}
\maketitle
    \begin{exercise}{1.1.1}
        Let $\Omega=\mathbf{R}$, $\mathcal{F}=$ all subsets so that $A$ or $A^c$ is countable, $P(A) = 0$ in the first case and $= 1$ in the second. Show that $(\Omega,\mathcal{F},P)$ is a probability space. 
    \end{exercise}
    \begin{proof}
        a), For the case $A$ is countable, $A^c$ must be uncountable, because $\mathbb{R}$ is uncountable. But $(A^c)^c=A$ is countable, which means $A^c\in\mathcal{F}$. So, if $A\in\mathcal{F}$, then $A^c\in\mathcal{F}$. For the case $A^c$ is countable, which means $A\in\mathcal{F}$. In summary, if $A\in\mathcal{F}$, then we have $A^c\in\mathcal{F}$. 

        b), For any countable sequence sets $A_i\in\mathcal{F}$, $A_i$ must be either the subset of $\mathbb{Q}$ or at least including all irrational numbers, which cloud make sure $A$ or $A^c$ is countable, because only rational numbers in real numbers are countable. So, $\cup_iA_i$ is either the subset of the $\mathbb{Q}$ or at least including all irrational numbers. In this case, Either $\cup_iA_i$ or $(\cup_iA_i)^c$ is countable. i.e. $\cup_iA_i\in\mathcal{F}$. 

        So, $\mathcal{F}$ is $\sigma$-algebra. For $P$, because $\Omega$ is uncountable, $P(\Omega)=1$. Thus, $(\Omega,\mathcal{F},P)$ is a probability space. 
    \end{proof}
    
    \begin{exercise}{1.1.3}
        A $\sigma$-field $\mathcal{F}$ is said to be countably generated if there is a countable collection $\mathcal{C} \subset \mathcal{F}$ so that $\sigma(\mathcal{C}) = \mathcal{F}$. Show that $\mathcal{R}^d$ is countably generated. 
    \end{exercise}
    % \begin{proof}
    %     With the hint from exercise 1.1.2, we can prove that $\sigma(\mathcal{S}_d)=\mathcal{R}^d$. \(\mathcal{S}_d=\{(a_1, b_1]\times(a_2,b_2]\times\cdots\times(a_n,b_n]:-\infty\le a_1<b_1\le +\infty\}\). Let $\mathcal{O}$ denotes all open subsets in $\mathcal{R}^d$. So, $\mathcal{R}^d$ can be generated by $\mathcal{O}$. Then, we need to prove $\sigma(\mathcal{O})\subset \sigma(\mathcal{S}_d)$ and $\sigma(\mathcal{S}_d)\subset \sigma(\mathcal{O})$. 

    %     a), Notice that 
    %     \[\left(a_1, b_{1}\right) \times \cdots \times\left(a_{d}, b_{d}\right)=\cup_{n\to\infty}\left(a_1, b_{1}-1 / n\right]\times \cdots \times\left(a_{d}, b_{d}-1 / n\right]\]
    %     which means the open rectangles $\left(a_1, b_{1}\right) \times \cdots \times\left(a_{d}, b_{d}\right)\subset \sigma(\mathcal{S}_d)$. For any open set in $\sigma(\mathcal{O})$, it can be represented as countable union of open rectangles of rational numbers, because rational numbers are dense and countable. So, we have $\sigma(\mathcal{O})\subset\sigma(\mathcal{S}_d)$. 

    %     b), Observe that
    %     \[\left(a_1, b_{1}\right] \times \cdots \times\left(a_{d}, b_{d}\right]=\cap_{n\to\infty}\left(a_1, b_{1}+1 / n\right)\times \cdots \times\left(a_{d}, b_{d}+1 / n\right)\]
    %     Because the union of open sets is open set, as well, we can get that $\mathcal{S}_d\subset\sigma(\mathcal{O})$. Futher, $\sigma(\mathcal{S}_d)\subset \sigma(\mathcal{O})$. 

    %     c), Combine a) and b), we know that $\sigma(\mathcal{S}_d)=\mathcal{R}^d$. Let $\mathcal{Q}=\{(q_1, \infty)\times\cdots\times(q_n, \infty):q_i\in\mathbb{Q}\}$. For any $\mathcal{S}=\left(a_1, b_{1}\right] \times \cdots \times\left(a_{d}, b_{d}\right]\in\mathcal{S}_d$, since $\mathbb{Q}$ is countable, $\mathcal{S}$ can be represented as countable intersection and union operations of the subsets in $\mathcal{Q}$. So, $\sigma(\mathcal{Q})=\sigma(\mathcal{S}_d)$. Then, we can get that $\mathcal{R}^d$ is countably generated. 
    % \end{proof}
    \begin{proof}
        We know that rational numbers $\mathbb{Q}$ is dense in $\mathbb{R}$. Hence any open sets in $\mathbb{R}^n$ can be represented as countable intersections and unions of $(B_r(x), x\in\mathbb{Q}^n, r\in\mathbb{Q}^+)$. Similiarly, we can use open rectangles $\{(a_1,b_1)\times\cdots\times(a_n,b_n), a_i, b_i\in\mathbb{Q}\}$ represent any $(B_r(x)$. In this case, because $\mathbb{Q}$ is countable, $\mathcal{R}^d$ is countably generated. 
    \end{proof}

    \begin{exercise}{1.1.4}
        (i) Show that if $\mathcal{F}_1\subset\mathcal{F}_2\subset\cdots$ are $\sigma$-algebras, then $\cup_i\mathcal{F}_i$ is an algebra. 
        
        (ii) Give an example to show that $\cup_i\mathcal{F}_i$ need not be a $\sigma$-algebra. 
    \end{exercise}
    \begin{proof}
        i), 
        \begin{itemize}
            \item For any $A\in\cup_i\mathcal{F}_i$, there must be a $k$, such that $A\in\mathcal{F}_k$. So, $A^c\in\mathcal{F}_k$. Thus, $A^c\in\cup_i\mathcal{F}_i$. 
            \item For $A, B\in\cup_i\mathcal{F}_i$, there must be $a,b$, such that $A\in\mathcal{F}_a$, $B\in\mathcal{F}_b$. So, $A\cup B\subset\mathcal{F}_a\cup\mathcal{F}_b\subset\cup_i\mathcal{F}_i$. 
        \end{itemize} 
        So, $\cup_i\mathcal{F}_i$ is an algebra. 

        ii), Let $\mathcal{F}_i=\{-i,\cdots,i\}$, and $\mathcal{F}_1\subset\mathcal{F}_2\subset\cdots$. 
        For $\mathcal{A}_i=\{i\}\in\cup_i\mathcal{F}_i$, $\cup_i^{\infty}\mathcal{A}_i=\mathbb{N}\backslash\{0\}$. 
        If $\cup_i\mathcal{F}_i$ is a $\sigma$-algebra, there should be a $k$, such that $\mathbb{N}\backslash\{0\}\subset\mathcal{F}_k$, however, it is impossible. So, $\cup_i\mathcal{F}_i$ need not be a $\sigma$-algebra. \footnote{Maybe not correct. }
    \end{proof}
    \begin{exercise}{1.1.5}
        A set $A \subset \{1,2, \cdots\}$ is said to have asymptotic density $\theta$ if
        \[
        \lim _{n \rightarrow \infty}|A \cap\{1,2, \cdots, n\}| / n=\theta
        \]
        Let $\mathcal{A}$ be the collection of sets for which the asymptotic density exists. Is $\mathcal{A}$ a $\sigma$-algebra? an algebra?
    \end{exercise}

    \begin{solution}
        Let $A_1=\{1,\cdots,n_1, \xout{n_1+1, \cdots, 2n_1}\}$, 
        
        $|A_1 \cap\{1,2, \cdots, 2n_1\}| / (2n_1)=\frac{1}{2}$; 
        
        Let $A_2=\{1,\cdots,n_1,\xout{n_1+1, \cdots, 4n_1}\}$, 
        
        $|A_2 \cap\{1,2, \cdots, 4n_1\}| / (4n_1)=\frac{1}{4}$; 

        Let $A_3=\{1,\cdots,n_1,\xout{n_1+1, \cdots, 4n_1}, 4n_1+1, \cdots, 6n_1\}$, 
        
        $|A_3 \cap\{1,2, \cdots, 6n_1\}| / (6n_1)=\frac{3}{6}=\frac{1}{2}$; 

        Let $A_4=\{1,\cdots,n_1,\xout{n_1+1, \cdots, 4n_1}, 4n_1+1, \cdots, 6n_1,\xout{6n_1+1, \cdots, 12n_1}\}$, 
        
        $|A_4 \cap\{1,2, \cdots, 12n_1\}| / (12n_1)=\frac{3}{12}=\frac{1}{4}$; 

        $\cdots\cdots$

        Like this, we can get an infinite countable set sequence $\{A_i\}$, and its limit oscillates between $\frac{1}{2}$ and $\frac{1}{4}$. So, the limit of $\{A_i\}$ doesn't exist, i.e. $\cup_i^\infty A_i\not\in\mathcal{A}$, however, $A_i\in \mathcal{A}$. Hence, $\mathcal{A}$ isn't a $\sigma$-algebra. 

        I guess it may not be an algebra. But I can not get an example to prove it. 
    \end{solution}

    \begin{exercise}{1.2.1}
        Suppose $X$ and $Y$ are random variables on $(\Omega, \mathcal{F}, P)$ and let $A \in \mathcal{F}$. Show that if we let $Z(\omega)=X(\omega)$ for $\omega \in A$ and $Z(\omega)=Y(\omega)$ for $\omega \in A^{c}$, then $Z$ is a random variable.
    \end{exercise}
    \begin{proof}
        First, $Z: \Omega\to\mathbb{R}$, 
        \begin{equation*}
            z(\omega)=\left\{
            \begin{aligned}
                &X(\omega)\in\mathbb{R}, \omega\in A\\
                &Y(\omega)\in\mathbb{R}, \omega\in A^c
            \end{aligned}
            \right., 
        \end{equation*}
        So, $Z(\omega)\in\mathbb{R}$. 

        Second, for borel set $B\in\mathbb{R}$, we need to prove that $Z^{-1}\in\mathcal{F}$. 
        \begin{align*}
            Z^{-1}(B)&=\{\omega\in\Omega:Z(\omega)\in B\}\\
            &=\{\omega\in A: X(\omega)\in B\}\cup\{\omega\in A^c: Y(\omega)\in B\}\\
            &=\{A\cap X^{-1}(B)\}\cup\{A^c\cap Y^{-1}(B)\}. 
        \end{align*}
        Because $A$ and $A^c\in\mathcal{F}$, $Z^{-1}\in\mathcal{F}$. 
    \end{proof}

    \begin{exercise}{1.2.4}
        Show that if $F(x)=P(X \leq x)$ is continuous, then $Y=F(X)$ has a uniform distribution on $(0,1)$, that is, if $y \in[0,1], P(Y \leq y)=y$.
    \end{exercise}

    \begin{proof}
        $F(X)$ is the CDF of $X$, then, we have
        \begin{align*}
            P(Y<y)&=P(F(X)<y)\\
            &=P(X<F^{-1}(y))\\
            &=F(F^{-1}(y))\\
            &=y
        \end{align*}
    \end{proof}

    \begin{exercise}{1.2.7}
        (i) Suppose $X$ has density function $f$. Compute the distribution function of $X^{2}$ and then differentiate to find its density function. 
        
        (ii) Work out the answer when $X$ has a standard normal distribution to find the density of the chi-square distribution. 
    \end{exercise}

    \begin{solution}
        (i), $P(X\leqslant x)=\int_{-\infty}^xf(y)\der y$. We have $X^2\leqslant x$, iff $-\sqrt{x}\leqslant X \leqslant \sqrt{x}$. 
        
        For $x<0$, $X^2$ can not be negative. And
        \[P(X^2\leqslant x)=0, x<0.\]
        For $x\geqslant 0$, assume $g$ is CDF of $X^2$. Then, we have
        \[F(X^2)=P(X^2\leqslant x)=\int_0^x g(y)\der y=\int_{-\sqrt{x}}^{\sqrt{x}}f(y)\der y\]
        \[g(x^2)=F^\prime(X^2)=f(\sqrt{x})\frac{1}{2\sqrt{x}}+f(-\sqrt{x})\frac{1}{2\sqrt{x}}=\frac{f(\sqrt{x})+f(-\sqrt{x})}{2\sqrt{x}}\]

        (ii), $f(x)=\frac{1}{\sqrt{2\pi}}\exp(x^2/2)$, $g(x^2)=\frac{\frac{2}{\sqrt{2\pi}}\exp(x/2)}{2\sqrt{x}}=\frac{\exp(x/2)}{\sqrt{2\pi x}}$. 
    \end{solution}

    \begin{exercise}{1.3.1}
        Show that if $\mathcal{A}$ generates $\mathcal{S}$, then $X^{-1}(\mathcal{A}) \equiv\{\{X \in A\}: A \in \mathcal{A}\}$ generates $\sigma(X)=$ $\{\{X \in B\}: B \in \mathcal{S}\}$. 
    \end{exercise}

    \begin{proof}
        We can write $\sigma(X)$ as $X^{-1}(\mathcal{S})$. Then, we need to prove: 
        \[\sigma(\mathcal{A})=\mathcal{S}\Rightarrow \sigma(X^{-1}(\mathcal{A}))=X^{-1}(\mathcal{S}). \]
        1, $\sigma(X^{-1}(\mathcal{A}))\subset X^{-1}(\mathcal{S})$. 
        \[\mathcal{A}\subset\sigma(\mathcal{A})=\mathcal{S}, X^{-1}(\mathcal{A})\subset X^{-1}(\mathcal{S})\]
        \[\sigma(X^{-1}(\mathcal{A}))\subset \sigma(X^{-1}(\mathcal{S}))=X^{-1}(\mathcal{S}), \]
        because $X^{-1}(\mathcal{S})$ is $\sigma$-field. 

        2, $\sigma(X^{-1}(\mathcal{A}))\supset X^{-1}(\mathcal{S})$. 
        \[X^{-1}(\mathcal{S})=X^{-1}(\sigma(\mathcal{A}))=X^{-1}(\mathcal{A})\subset\sigma(X^{-1}(\mathcal{A})). \]
        So, we can conclude that $\sigma(X^{-1}(\mathcal{A}))=X^{-1}(\mathcal{S})$. 
    \end{proof}

    \begin{exercise}{1.3.5}
        A function $f$ is said to be lower semicontinuous or l.s.c. if
        $$
        \liminf _{y \rightarrow x} f(y) \geq f(x)
        $$
        and upper semicontinuous (u.s.c.) if -$f$ is l.s.c. Show that $f$ is l.s.c. if and only if $\{x: f(x) \leq a\}$ is closed for each $a \in \mathbf{R}$ and conclude that semicontinuous functions are measurable.
    \end{exercise}

    \begin{solution}
        1, (a) $\{x: f(x) \leq a\}$ is closed $\Rightarrow$ $f$ is l.s.c. 

        Let $\{y_n\}\in\{x:f(x)\leqslant a\}$, $(y_n \to y)$. And let $a=f(y)$, then we have $f(y_n)\leqslant f(y)$. 

        So, we need to prove: 
        \[\liminf_{y_n\to y}f(y_n)\geqslant f(y). \]
        $\forall \varepsilon>0$, there must be a $\delta$ and $n_1$, satisfied when $|y_{n_1}-y|<\delta$, $\{f(y_n)\}_{n=n_1}^\infty$ is monotonic. So, we have: 
        \[f_y-f_{y_{n_1}}\leqslant \varepsilon\]
        i.e. $f$ is l.s.c. 

        1, (b) $f$ is l.s.c. $\Rightarrow$ $\{x: f(x) \leq a\}$ is closed. 

        Let $\{y_n\}$ is a sequence in $\{x:f(x\leqslant a)\}, \forall a\in\mathbb{R}$. Suppose $y_n\to y$, we need to prove $y\in\{x:f(x\leqslant a)\}$. 
        \[f(y)\leqslant\liminf_{y_n\to y}f(y_n)<a, \]
        So, $y\in\{x:f(x\leqslant a)\}$. i.e. $\{x: f(x) \leq a\}$ is closed. 
        
        The case for u.s.c. is similiar. 

        2, Suppose $f$ is l.s.c., then $f:\,(-\infty, a]\to \mathbb{R}$, and $\sigma((-\infty,a])=\mathbb{R}$. So, we have: 
        \[f^{-1}(\mathbb{R})=\sigma((-\infty,a])=\mathbb{R}, \]
        Hence, $f$ is measurable. 
    \end{solution}
    
\end{document}

